name: Notify
on:
  workflow_run:
    workflows: ["Check endpoint status"]
    types:
      - completed

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Feishu Notification
        run: |
          curl -X POST -H 'Content-Type: application/json' \
          -d '{
                "msg_type": "text",
                "content": {
                  "text": "ğŸš¨ Upptime é€šçŸ¥ï¼š\nç«™é» {{ SITE_NAME }} å‡ºç¾å•é¡Œï¼\nç‹€æ…‹ï¼š{{ STATUS }}\næ™‚é–“ï¼š{{ TIME }}"
                }
              }' ${FEISHU_WEBHOOK_URL}
        env:
          FEISHU_WEBHOOK_URL: ${{ secrets.FEISHU_WEBHOOK_URL }}
